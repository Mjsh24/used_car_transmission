### 🛠 사용 기술 및 라이브러리

---

- `Pandas`, `scikit-learn`, `Matplotlib`, `Graphviz`
- **DecisionTreeClassifier** 를 이용한 머신러닝 모델 설계 및 시각화

### 🗂️  데이터셋

---

- https://www.kaggle.com/code/yogidsba/predict-used-car-prices-linearregression:  인도 중고차 데이터셋
- 총 약 6000여 건의 차량 정보
- 주요 컬럼:
    - `Kilometers_Driven`, `Fuel_Type`, `Mileage`, `Power`, `Price`
- 타겟 컬럼: `Transmission` (0 = Manual, 1 = Automatic)
- 가격은 **환율 1INR = 16.73KRW 적용**, **백만 원 단위로 환산**

### 🖥 역할

---

- `Transmission` 예측을 위한 **분류 문제 정의**
- 문자열 전처리, 결측치 처리, 인코딩, 파생변수 생성 등 전처리 수행
- `DecisionTreeClassifier` 학습 및 ROC 곡선 분석
- 최종 모델에 사용자 입력값 예측 기능 구현

### 🌟 목표

---

> **문제의식**
> 
- 중고차 구매자 입장에서 **자동/수동 여부는 매우 중요한 구매 조건 중 하나**
- 특히 온라인 플랫폼에서 수천 개의 중고차 정보를 비교할 때, 사용자가 직접 분류하지 않고도 **자동차 정보를 기반으로 변속기 유형을 예측해주는 모델**이 있으면 편리함
- 이를 통해 **중고차 검색, 추천, 필터링 서비스의 품질 향상**에 기여 가능

> **목표**
> 
- 차량의 제원 정보(가격, 출력, 주행거리 등)를 기반으로 **변속기 유형(수동/자동)을 분류하는 머신러닝 모델을 개발**
- **의사결정트리를 통해 예측과 동시에 해석 가능한 모델**을 만들고, 중요한 판단 기준이 되는 변수를 시각적으로 확인
- ROC 곡선과 AUC 점수를 통해 **모델 성능을 직관적으로 평가**

### ▶️ 진행 과정

---

### 0. 주제 선정 및 배경

![주제 선정 배경 자료 *(출처: 발표자료)*](attachment:eaa385ca-19ed-4eb8-a6fb-c461388b40fc:image.png)

주제 선정 배경 자료 *(출처: 발표자료)*

인도의 도시화, 교통 혼잡, 가격 접근성 등 여러 요인으로 인해 최근 **자동변속기에 대한 수요가 빠르게 증가**중

- 기존에는 **수동 변속기 차량의 점유율이 매우 높았던** 인도 시장이
    
    최근 들어 **자동차 구매 트렌드 변화**를 보이며 **자동변속기 선호도가 높아지는 중**
    
- 이에 따라 **변속기 유형(수동/자동)은 차량 구매 결정에 중요한 요소**로 작용
- 중고차 시장에서도 **차량 제원을 바탕으로 변속기 유형을 예측하는 모델**이 있다면,
    
    **실제 수요 예측 및 맞춤형 추천 시스템에 활용 가능**
    

### 1.  데이터 수집 및 전처리

**결측치 처리**

- `Transmission`: 최빈값('Manual')으로 채움
- `Power`, `Mileage`: 평균값으로 채움

**범주형 인코딩**

- `Fuel_Type`: `{'Diesel': 0, 'Petrol': 1, 'CNG': 2, 'LPG': 3, 'Electric': 4}`로 인코딩
- `Transmission`: `{'Manual': 0, 'Automatic': 1}`로 인코딩

**환율 적용 및 가격 변환**

```python
car_df['Price'] = (car_df['Price'] * 100000 * 16.73) / 1_000_000  # 단위: 백만 원
```

**파생 변수 생성**

- `Engine` 값을 기준으로 **Car Size (경/소/중/대형)** 변수를 생성

### 2. 모델 학습

**데이터 분할**

- 전체 데이터를 학습용(80%)과 테스트용(20%)으로 나눔
- `train_test_split()` 함수 사용
- **random_state=42**로 재현 가능성 확보

```python
from sklearn.model_selection import train_test_split

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)
```

**모델 구성**

- `DecisionTreeClassifier(max_depth=5, random_state=42)`
- **사용 피처**:
    - `Kilometers_Driven`, `Fuel_Type`, `Mileage`, `Power`, `Price`
    - 사용 피처는 전처리 과정에서 선정한 `features_selected` 리스트를 기반으로 구성됨.

```python
model = DecisionTreeClassifier(max_depth=5, random_state=42)
model.fit(X_train, y_train)
```

**피처 중요도**

![피쳐 중요도 시각화 *(출처: 발표자료)*](attachment:2551ea89-560b-46c7-9181-2bed981e6d92:image.png)

피쳐 중요도 시각화 *(출처: 발표자료)*

- **Power**: 0.4172
- **Kilometers_Driven**: 0.2737
- **Mileage**: 0.1932
- **Price**: 0.1159
- **Fuel_Type**: 0.0

### 3. 성능평가

**기본  모델 성능 (max_depth = 5)**

![image.png](attachment:e603a993-fc1b-484c-ac9c-da8ceaebeaf5:image.png)

- **훈련/테스트 간 성능 차이가 크지 않음**
- 정밀도와 재현율, F1점수 등도 안정적
- 모델이 **과적합 없이 적절히 일반화됨**

**하이퍼파라미터 튜닝 결과 (GridSearchCV)**

![image.png](attachment:243329fb-6f78-4207-84aa-be4d77a1de21:image.png)

- 하이퍼파라미터 튜닝으로 **전반적인 성능 향상**
- 특히 **정밀도와 F1 점수의 향상이 뚜렷함**
- **GridSearchCV를 통한 최적 max_depth 적용으로 일반화 성능 향상**
- **과적합 없이 모델이 잘 튜닝됨**

**ROC 곡선 분석**

![ROC 곡선 그래프 *(출처: 발표자료)*](attachment:796a2b5b-db29-4232-a4f7-1c935327acab:image.png)

ROC 곡선 그래프 *(출처: 발표자료)*

- ROC 곡선을 통한 이진 분류 성능 평가
- AUC = **0.8980** → **모델이 약 90% 확률로 변속기 구분**
- 민감도가 높고, FPR이 낮은 구간에서도 성능 우수

### 4. 모델 시각화

- 트리 구조를 통해 어떤 피처가 먼저 판단 기준으로 작용했는지 시각적으로 확인 가능
- -특히 Power → Kilometers_Driven 순으로 가지가 나뉘며 주요 분류 기준이 되는 흐름을 보여줌
- `export_graphviz()` 함수로 `.dot` 파일 생성
- Graphviz를 통해 의사결정 경로 확인 가능

![의사결정트리 시각화](attachment:f6c8a92d-b59b-4828-88c8-4e9d6abdb114:image.png)

의사결정트리 시각화

### 5. 예측 결과 적용 사례

> **최종 모델을 통해 실제 중고차 데이터를 입력한 후, 예측된 변속기 유형이 실제 값과 일치하는지
확인**하는 실험을 수행
> 
- 예측 대상:
    
    **2010년식 Maruti WagonR, 주행거리 72,000km, CNG 연료, 출력 58.16bhp, 가격 약 293만 원**
    
- 실제 변속기: `'Manual'`
- 모델 예측 결과: `'Manual'` → **정확히 예측 성공!**

![최종 예측 모델 예시 *(출처: 발표자료)*](attachment:603072ba-dd73-444e-81bc-511cf1d47f7d:image.png)

최종 예측 모델 예시 *(출처: 발표자료)*

✔️ **실제 데이터를 기반으로 학습한 모델이, 주요 차량 정보를 토대로 정확한 분류 결과를 도출함을 확인**

---

# ▪️ 결론 및 시사점

### ✔️ 결론

---

- 본 프로젝트에서는 **중고차의 차량 제원 정보를 바탕으로 변속기 유형(수동/자동)을 예측하는 머신러닝 모델**을 개발함
- `DecisionTreeClassifier`를 기반으로 학습을 수행한 결과, **약 88%의 테스트 정확도와 AUC 0.898의 우수한 분류 성능**을 달성
- 차량의 출력(Power), 주행거리(Kilometers_Driven), 연비(Mileage) 등의 제원이 **변속기 유형 예측에 주요한 영향**을 준다는 결과를 도출함
- 추가로, 모델 시각화를 통해 **예측에 사용된 주요 판단 기준을 직관적으로 확인**할 수 있었음

### ❗시사점

---

**중고차 플랫폼 적용 가능성과 의사결정트리의 실용성**

- 차량의 출력, 주행거리, 연비, 가격 등 기본 제원만으로 **변속기 예측이 가능하다는 점은 실용적 의미가 크다**
- 특히 **Power의 중요도가 가장 높았던 점**은 실제 소비자의 변속기 선택 기준과 밀접한 관련이 있음을 시사
- 해석이 가능한 모델이라는 점에서, **중고차 필터링/추천 시스템에 직접 연결 가능한 알고리즘으로 활용 가능성 높음**

**예측에 기여하지 않는 피처의 분석적 가치**

- `Fuel_Type`이 0의 중요도를 보인 것은 **모든 변수가 항상 유의미한 것은 아님을 보여주는 사례**
- 앞으로의 피처 설계에서 불필요한 정보를 줄이고, **핵심 변수 중심 모델로 압축 가능함을 시사**

---

# ▪️ 느낀점

### 🧠 개선이 필요한 사항

---

**전처리 순서의 중요성과 범주형 처리 방식의 영향**

- 문자열 정제 전에 인코딩을 수행하면 NaN 발생 등 오류가 발생할 수 있음
- `map()` 방식 인코딩 시 타입 주의 필요 → **전처리 흐름을 미리 설계하는 습관**이 중요함

**클래스 비율 불균형으로 인한 성능 왜곡 가능성**

- `Transmission` 데이터는 수동 비중이 많아 불균형 존재
    
    → 단순 정확도 외에도 **정밀도, 재현율, F1-score 등 복수 지표 활용** 필요
    

### ⚡ 성과 및 배운 점

---

**설명 가능한 모델을 통한 해석력 향상**

- 의사결정트리는 단순 분류뿐 아니라 **모델의 판단 기준을 시각적으로 설명할 수 있다는 점**에서 높은 해석력을 가짐
- 실제 예측 흐름(출력 → 연비 → 가격 등)을 눈으로 확인하며, **사용자와 공유하기에도 적합한 모델**

**실전 활용 관점의 예측 흐름 구현 경험**

- 단순 학습을 넘어서 **사용자 입력값 기반 예측 기능을 구현**함으로써, 실제 서비스 흐름을 설계하는 경험까지 진행
- 이를 통해 **데이터 준비 → 모델 구성 → 예측 응답까지의 흐름**을 처음부터 끝까지 체계적으로 연습할 수 있었음